import{y as R,C as q,A as M,r as n,j as e,m as b,I as _,B as F,E as K,x as W,T as o,W as O}from"./index-nQFFAt2i.js";import{d as U,a as z,v as D}from"./test-password-A32DOsyd.js";import{u as G,T as w,L as J}from"./LoadingButton-nbMB_GQd.js";import{L as N}from"./logo-9c5ToLA2.js";import{I as $}from"./InputAdornment-O14RqhdT.js";import{C as H}from"./Card-QkZeCVK7.js";import{L as y}from"./Link-xj30OAaA.js";import"./Select-bwqtkRDL.js";function Q(){var p,h,x,g,f,j,k,v;const S=R(),l=G(),{mutate:C,isLoading:L}=q(),{setSession:V}=M(),t=n.useRef(),[d,E]=n.useState(!1),[I,u]=n.useState(""),[i,T]=n.useState({email:"",password:""}),[a,B]=n.useState({email:!1,password:!1}),m=s=>{s.target.name==="password"&&(D(t.current.elements.password.value)?s.target.setCustomValidity(""):s.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),T({...i,[s.target.name]:s.target.value})},c=s=>{B({...a,[s.target.name]:!0})},P=s=>{s.preventDefault(),t.current.checkValidity()&&C(i,{onSuccess:r=>{V(r),sessionStorage.setItem("session_data",JSON.stringify(r)),l.push("/")},onError:r=>{if(!r.response)return u("Tarkista verkkoyhteytesi");switch(r.response.status){case 400:u("Väärä sähköposti tai salasana");break;default:u("Oho, jokin meni vikaan");break}}})},A=e.jsx("form",{noValidate:!0,onSubmit:P,ref:t,children:e.jsxs(b,{spacing:3,children:[e.jsx(w,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(a.email&&((h=(p=t.current)==null?void 0:p.elements.email)!=null&&h.validationMessage)),helperText:a.email&&((g=(x=t.current)==null?void 0:x.elements.email)==null?void 0:g.validationMessage),InputLabelProps:{required:!1},value:i.email,onChange:m,onBlur:c}),e.jsx(w,{name:"password",type:d?"text":"password",label:"Salasana",required:!0,error:!!(a.password&&((j=(f=t.current)==null?void 0:f.elements.password)!=null&&j.validationMessage)),helperText:a.password&&((v=(k=t.current)==null?void 0:k.elements.password)==null?void 0:v.validationMessage),InputLabelProps:{required:!1},value:i.password,onChange:m,onBlur:c,InputProps:{endAdornment:e.jsx($,{position:"end",children:e.jsx(_,{onClick:()=>E(!d),edge:"end",children:d?e.jsx(U,{}):e.jsx(z,{})})})}}),e.jsx(J,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:L,children:"Kirjaudu"})]})});return e.jsxs(F,{sx:{...K({color:W(S.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(N,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(b,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(H,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(o,{variant:"h4",children:"Kirjaudu sisään"}),e.jsxs(o,{variant:"body2",sx:{mt:2,mb:2},children:["Ei käyttäjää?",e.jsx(y,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{l.push("/register")},children:"Rekisteröidy"})]}),e.jsx(o,{variant:"body1",color:"error",sx:{mb:5},children:I}),A,e.jsx(o,{variant:"body2",sx:{mt:2,mb:2,textAlign:"right"},children:e.jsx(y,{sx:{ml:.5},component:"button",onClick:()=>{l.push("/forgot-password")},children:"Unohtuiko salasana?"})})]})})]})}function ne(){return e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsx("title",{children:" Kirjaudu | SE-AS "})}),e.jsx(Q,{})]})}export{ne as default};
