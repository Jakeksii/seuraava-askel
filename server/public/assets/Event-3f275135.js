import{j as e,u as h,L as f,C as j,r as p}from"./index-d49ab656.js";import{b as g,u as w,d as N,a as v}from"./useFormatDate-14516289.js";import{u as _,d as y}from"./LocationOn-b7c7f246.js";import{H as o}from"./Header-d226c88f.js";import{P as b,N as E}from"./NotFound-0e6eb695.js";import{a as F}from"./axios-b8a0d269.js";import{u as k}from"./useQuery-d6218f28.js";import"./constants-06a9c141.js";import"./CloudinaryImage-f7796968.js";function z(){return e.jsx("footer",{children:e.jsx("div",{className:" pb-16"})})}function L(n){return k({queryKey:["event_page",n._id],staleTime:1e3*60,queryFn:async()=>{const{data:s}=await F.get("/api/events/single/"+n._id);return s},onError(s){console.error("Error when fetching event: ",s)},onSuccess(s){console.log("Succesfully fetched event: ",s)}})}const P=e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsx("main",{className:"grid place-items-center text-white pt-3","aria-busy":!0,children:e.jsx(j,{color:"inherit",size:50})})]}),i=e.jsx(p.Suspense,{children:e.jsx(E,{})});function W(){const{event_id:n}=h(),s=_();if(!n)return i;const{data:t,isLoading:c,isError:l}=L({_id:n});if(c)return P;if(!t||l)return i;const d="/"+encodeURI(t.organization.organization_name.replace(/\s/g,"-")),r=s.locationOn?Math.round(g(s.coords.longitude,s.coords.latitude,t.address.coordinates[0],t.address.coordinates[1])):null,m=r!=null?e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(y,{style:{color:"white"}}),e.jsxs("h6",{className:"p-1 text-white",children:[r," km"]})]}):null,a=w(t.start_date,t.end_date),u=e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(N,{style:{color:"white"}}),e.jsx("h6",{className:"p-1 text-white",children:a.startDate+" - "+a.endDate})]}),x=e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(v,{style:{color:"white"}}),e.jsxs("h6",{className:"p-1 text-white",children:[a.startTime," - ",a.endTime]})]});return e.jsxs(e.Fragment,{children:[e.jsx(o,{}),e.jsxs("main",{className:"m-auto",children:[e.jsx("section",{children:e.jsx(b,{image_id:t.image_id,width:820>window.innerWidth?window.innerWidth+100:820})}),e.jsxs("section",{className:"m-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"text-slate-50 hover:text-slate-300 underline",to:d,children:t.organization.organization_name}),e.jsx("h1",{children:t.title})]}),e.jsxs("div",{className:"bg-white text-black p-4 pt-1 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col gap-2 pt-2 pb-2 justify-center grow sm:flex-row",children:[m,u,x]}),e.jsx("div",{className:"w-fit m-auto",dangerouslySetInnerHTML:{__html:t.extract}})]})]})]}),e.jsx(z,{})]})}export{W as default};
