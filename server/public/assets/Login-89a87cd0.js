import{_ as ie,a as u,w as le,x as ee,S as ce,R as w,y as ue,z as de,A as pe,B as me,D as he,E as Q,F as q,G as fe,H as be,I as xe,r as C,o as T,j as a,J as N,K as X,s as z,l as U,m as G,M as I,N as ge,n as ve,O as E,P as W,Q as Ce,T as ye,U as Y,V as ke,W as Re,X as Se,Y as je,C as Pe,L as A}from"./index-8bb4ccf4.js";import{s as Fe,u as te,f as Me,C as Be,A as Ie,d as Oe,B as $e,T as Z,G as D}from"./LockOutlined-8ea43c30.js";import{H as we}from"./Header-aee7db4c.js";import{s as Le,a as Ne}from"./axios-b8a0d269.js";import{e as Ee,T as H}from"./Grow-52ce5280.js";var Te=function(e){ie(s,e);function s(n,o){var t;return t=e.call(this)||this,t.client=n,t.setOptions(o),t.bindMethods(),t.updateResult(),t}var r=s.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(o){this.options=this.client.defaultMutationOptions(o)},r.onUnsubscribe=function(){if(!this.listeners.length){var o;(o=this.currentMutation)==null||o.removeObserver(this)}},r.onMutationUpdate=function(o){this.updateResult();var t={listeners:!0};o.type==="success"?t.onSuccess=!0:o.type==="error"&&(t.onError=!0),this.notify(t)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(o,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,u({},this.options,{variables:typeof o<"u"?o:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var o=this.currentMutation?this.currentMutation.state:le(),t=u({},o,{isLoading:o.status==="loading",isSuccess:o.status==="success",isError:o.status==="error",isIdle:o.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},r.notify=function(o){var t=this;ee.batch(function(){t.mutateOptions&&(o.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):o.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),o.listeners&&t.listeners.forEach(function(d){d(t.currentResult)})})},s}(ce);function ze(e,s,r){var n=w.useRef(!1),o=w.useState(0),t=o[1],d=ue(e,s,r),h=de(),i=w.useRef();i.current?i.current.setOptions(d):i.current=new Te(h,d);var l=i.current.getCurrentResult();w.useEffect(function(){n.current=!0;var p=i.current.subscribe(ee.batchCalls(function(){n.current&&t(function(c){return c+1})}));return function(){n.current=!1,p()}},[]);var m=w.useCallback(function(p,c){i.current.mutate(p,c).catch(pe)},[]);if(l.error&&Le(void 0,i.current.options.useErrorBoundary,[l.error]))throw l.error;return u({},l,{mutate:m,mutateAsync:l.mutate})}const Ue=["component","direction","spacing","divider","children","className","useFlexGap"],_e=me(),qe=Fe("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,s)=>s.root});function De(e){return he({props:e,name:"MuiStack",defaultTheme:_e})}function Ve(e,s){const r=C.Children.toArray(e).filter(Boolean);return r.reduce((n,o,t)=>(n.push(o),t<r.length-1&&n.push(C.cloneElement(s,{key:`separator-${t}`})),n),[])}const Ae=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],He=({ownerState:e,theme:s})=>{let r=u({display:"flex",flexDirection:"column"},Q({theme:s},q({values:e.direction,breakpoints:s.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=fe(s),o=Object.keys(s.breakpoints.values).reduce((i,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(i[l]=!0),i),{}),t=q({values:e.direction,base:o}),d=q({values:e.spacing,base:o});typeof t=="object"&&Object.keys(t).forEach((i,l,m)=>{if(!t[i]){const c=l>0?t[m[l-1]]:"column";t[i]=c}}),r=be(r,Q({theme:s},d,(i,l)=>e.useFlexGap?{gap:X(n,i)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${Ae(l?t[l]:e.direction)}`]:X(n,i)}}))}return r=xe(s.breakpoints,r),r};function Ge(e={}){const{createStyledComponent:s=qe,useThemeProps:r=De,componentName:n="MuiStack"}=e,o=()=>z({root:["root"]},i=>U(n,i),{}),t=s(He);return C.forwardRef(function(i,l){const m=r(i),p=Ee(m),{component:c="div",direction:y="column",spacing:j=0,divider:g,children:f,className:x,useFlexGap:b=!1}=p,M=T(p,Ue),O={direction:y,spacing:j,useFlexGap:b},P=o();return a.jsx(t,u({as:c,ownerState:O,ref:l,className:N(P.root,x)},M,{children:g?Ve(f,g):f}))})}function We(e){return U("PrivateSwitchBase",e)}G("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ye=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Je=e=>{const{classes:s,checked:r,disabled:n,edge:o}=e,t={root:["root",r&&"checked",n&&"disabled",o&&`edge${E(o)}`],input:["input"]};return z(t,We,s)},Ke=I(ge)(({ownerState:e})=>u({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Qe=I("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Xe=C.forwardRef(function(s,r){const{autoFocus:n,checked:o,checkedIcon:t,className:d,defaultChecked:h,disabled:i,disableFocusRipple:l=!1,edge:m=!1,icon:p,id:c,inputProps:y,inputRef:j,name:g,onBlur:f,onChange:x,onFocus:b,readOnly:M,required:O=!1,tabIndex:P,type:k,value:B}=s,R=T(s,Ye),[F,se]=ve({controlled:o,default:!!h,name:"SwitchBase",state:"checked"}),S=te(),oe=v=>{b&&b(v),S&&S.onFocus&&S.onFocus(v)},re=v=>{f&&f(v),S&&S.onBlur&&S.onBlur(v)},ne=v=>{if(v.nativeEvent.defaultPrevented)return;const K=v.target.checked;se(K),x&&x(v,K)};let $=i;S&&typeof $>"u"&&($=S.disabled);const ae=k==="checkbox"||k==="radio",_=u({},s,{checked:F,disabled:$,disableFocusRipple:l,edge:m}),J=Je(_);return a.jsxs(Ke,u({component:"span",className:N(J.root,d),centerRipple:!0,focusRipple:!l,disabled:$,tabIndex:null,role:void 0,onFocus:oe,onBlur:re,ownerState:_,ref:r},R,{children:[a.jsx(Qe,u({autoFocus:n,checked:o,defaultChecked:h,className:J.input,disabled:$,id:ae?c:void 0,name:g,onChange:ne,readOnly:M,ref:j,required:O,ownerState:_,tabIndex:P,type:k},k==="checkbox"&&B===void 0?{}:{value:B},y)),F?t:p]}))}),Ze=Xe,et=W(a.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),tt=W(a.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),st=W(a.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ot(e){return U("MuiCheckbox",e)}const rt=G("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),V=rt,nt=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],at=e=>{const{classes:s,indeterminate:r,color:n}=e,o={root:["root",r&&"indeterminate",`color${E(n)}`]},t=z(o,ot,s);return u({},s,t)},it=I(Ze,{shouldForwardProp:e=>Ce(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:r}=e;return[s.root,r.indeterminate&&s.indeterminate,r.color!=="default"&&s[`color${E(r.color)}`]]}})(({theme:e,ownerState:s})=>u({color:(e.vars||e).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${s.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ye(s.color==="default"?e.palette.action.active:e.palette[s.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${V.checked}, &.${V.indeterminate}`]:{color:(e.vars||e).palette[s.color].main},[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),lt=a.jsx(tt,{}),ct=a.jsx(et,{}),ut=a.jsx(st,{}),dt=C.forwardRef(function(s,r){var n,o;const t=Y({props:s,name:"MuiCheckbox"}),{checkedIcon:d=lt,color:h="primary",icon:i=ct,indeterminate:l=!1,indeterminateIcon:m=ut,inputProps:p,size:c="medium",className:y}=t,j=T(t,nt),g=l?m:i,f=l?m:d,x=u({},t,{color:h,indeterminate:l,size:c}),b=at(x);return a.jsx(it,u({type:"checkbox",inputProps:u({"data-indeterminate":l},p),icon:C.cloneElement(g,{fontSize:(n=g.props.fontSize)!=null?n:c}),checkedIcon:C.cloneElement(f,{fontSize:(o=f.props.fontSize)!=null?o:c}),ownerState:x,ref:r,className:N(b.root,y)},j,{classes:b}))}),pt=dt,mt=Ge({createStyledComponent:I("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,s)=>s.root}),useThemeProps:e=>Y({props:e,name:"MuiStack"})}),ht=mt;function ft(e){return U("MuiFormControlLabel",e)}const bt=G("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),L=bt,xt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],gt=e=>{const{classes:s,disabled:r,labelPlacement:n,error:o,required:t}=e,d={root:["root",r&&"disabled",`labelPlacement${E(n)}`,o&&"error",t&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",o&&"error"]};return z(d,ft,s)},vt=I("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:r}=e;return[{[`& .${L.label}`]:s.label},s.root,s[`labelPlacement${E(r.labelPlacement)}`]]}})(({theme:e,ownerState:s})=>u({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${L.disabled}`]:{cursor:"default"}},s.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},s.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},s.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${L.label}`]:{[`&.${L.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Ct=I("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,s)=>s.asterisk})(({theme:e})=>({[`&.${L.error}`]:{color:(e.vars||e).palette.error.main}})),yt=C.forwardRef(function(s,r){var n,o;const t=Y({props:s,name:"MuiFormControlLabel"}),{className:d,componentsProps:h={},control:i,disabled:l,disableTypography:m,label:p,labelPlacement:c="end",required:y,slotProps:j={}}=t,g=T(t,xt),f=te(),x=(n=l??i.props.disabled)!=null?n:f==null?void 0:f.disabled,b=y??i.props.required,M={disabled:x,required:b};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof i.props[F]>"u"&&typeof t[F]<"u"&&(M[F]=t[F])});const O=Me({props:t,muiFormControl:f,states:["error"]}),P=u({},t,{disabled:x,labelPlacement:c,required:b,error:O.error}),k=gt(P),B=(o=j.typography)!=null?o:h.typography;let R=p;return R!=null&&R.type!==H&&!m&&(R=a.jsx(H,u({component:"span"},B,{className:N(k.label,B==null?void 0:B.className),children:R}))),a.jsxs(vt,u({className:N(k.root,d),ownerState:P,ref:r},g,{children:[C.cloneElement(i,M),b?a.jsxs(ht,{direction:"row",alignItems:"center",children:[R,a.jsxs(Ct,{ownerState:P,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}):R]}))}),kt=yt;function Rt(){return ze({mutationFn:async e=>{const{data:s}=await Ne.post("/api/auth/login",{email:e.email,password:e.password});return s}})}function St(e){return a.jsxs(H,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Copyright © ",a.jsx(A,{to:"/",className:"text-info-main",children:"Seuraava Askel"})," ",new Date().getFullYear(),"."]})}function jt(e){if(!e)return"";switch(e){case 400:return"Tarkista salasana ja sähköposti osoite";case 500:return"Sisäinen palvelin virhe. Yritä uudelleen";default:return"Jokin meni vikaan. Yritä uudelleen"}}function Ot(){const e=ke(),s=Re(),r=Se(),{mutate:n,isLoading:o,error:t}=Rt(),d=async h=>{var l,m;h.preventDefault();const i=new FormData(h.currentTarget);n({email:(l=i.get("email"))==null?void 0:l.toString(),password:(m=i.get("password"))==null?void 0:m.toString()},{onSuccess(p){var c;e.setUser(p),sessionStorage.setItem("user_data",JSON.stringify(p)),(c=r.state)!=null&&c.from?s(r.state.from,{replace:!0}):s("/dashboard",{replace:!0})}})};return a.jsxs(a.Fragment,{children:[a.jsx(we,{}),a.jsx("main",{children:a.jsxs(Be,{component:"section",maxWidth:"xs",children:[a.jsxs("div",{className:"mt-4 flex flex-col items-center p-2 ",children:[a.jsx(Ie,{sx:{m:1,bgcolor:"secondary.dark"},children:a.jsx(Oe,{})}),a.jsx("div",{className:"pt-2 text-error-main",children:a.jsx("p",{children:jt(t==null?void 0:t.response.status)})}),a.jsxs($e,{component:"form",onSubmit:d,sx:{mt:1},children:[a.jsx(Z,{color:"info",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Sähköposti",name:"email",autoComplete:"email",autoFocus:!0}),a.jsx(Z,{color:"info",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Salasana",type:"password",id:"password",autoComplete:"current-password"}),a.jsx(kt,{control:a.jsx(pt,{value:"remember",color:"info"}),label:"Muista minut"}),a.jsx(je,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",disabled:o,sx:{mt:3,mb:2},children:o?a.jsx(Pe,{size:"26px",color:"info"}):a.jsx("p",{children:"Kirjaudu sisään"})}),a.jsxs(D,{container:!0,children:[a.jsx(D,{item:!0,xs:!0,children:a.jsx(A,{to:"#",className:"text-info-main",children:"Unohtuiko salasana?"})}),a.jsx(D,{item:!0,children:a.jsx(A,{to:"/register",className:"text-info-main",children:"Ei tiliä? Rekisteröidy."})})]})]})]}),a.jsx(St,{sx:{mt:6,mb:0}})]})})]})}export{Ot as default};
