import{j as e,u as f,a as j,L as g,C as p,r as w}from"./index-61a7dcf4.js";import{c as _,u as N,d as v,a as y}from"./useFormatDate-5d1358ae.js";import{u as b,d as E}from"./LocationOn-8db10a12.js";import{H as c}from"./Header-e82cbb85.js";import{P as F,N as L}from"./NotFound-7a0ce97b.js";import{a as k}from"./axios-b8a0d269.js";import{u as z}from"./useQuery-162dc6b5.js";import"./CloudinaryImage-f7796968.js";function P(){return e.jsx("footer",{children:e.jsx("div",{className:" pb-16"})})}function C(n){return z({queryKey:["event_page",n._id],staleTime:1e3*60,queryFn:async()=>{const{data:t}=await k.get("/api/events/single/"+n._id);return t},onError(t){console.error("Error when fetching event: ",t)},onSuccess(t){console.log("Succesfully fetched event: ",t)}})}const D=e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx("main",{className:"grid place-items-center text-white pt-3","aria-busy":!0,children:e.jsx(p,{color:"inherit",size:50})})]}),o=e.jsx(w.Suspense,{children:e.jsx(L,{})});function $(){const{user:n}=f(),{event_id:t}=j(),r=b();if(!t)return o;const{data:s,isLoading:l,isError:d}=C({_id:t});if(l)return D;if(!s||d)return o;const m="/"+encodeURI(s.organization.organization_name.replace(/\s/g,"-")),i=r.locationOn?Math.round(_(r.coords.longitude,r.coords.latitude,s.address.coordinates[0],s.address.coordinates[1])):null,u=i!=null?e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(E,{style:{color:"white"}}),e.jsxs("h6",{className:"p-1 text-white",children:[i," km"]})]}):null,a=N(s.start_date,s.end_date),x=e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(v,{style:{color:"white"}}),e.jsx("h6",{className:"p-1 text-white",children:a.startDate+" - "+a.endDate})]}),h=e.jsxs("div",{className:"flex items-center justify-center rounded-full bg-[#1976d2] p-0 sm:p-1",children:[e.jsx(y,{style:{color:"white"}}),e.jsxs("h6",{className:"p-1 text-white",children:[a.startTime," - ",a.endTime]})]});return e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsxs("main",{className:"m-auto",children:[n&&"Logged in user: "+n.user.first_name+" "+n.user.last_name,e.jsx("section",{children:e.jsx(F,{image_id:s.image_id,width:820>window.innerWidth?window.innerWidth+100:820})}),e.jsxs("section",{className:"m-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"text-slate-50 hover:text-slate-300 underline",to:m,children:s.organization.organization_name}),e.jsx("h1",{children:s.title})]}),e.jsxs("div",{className:"bg-white text-black p-4 pt-1 rounded-2xl",children:[e.jsxs("div",{className:"flex flex-col gap-2 pt-2 pb-2 justify-center grow sm:flex-row",children:[u,x,h]}),e.jsx("div",{className:"w-fit m-auto",dangerouslySetInnerHTML:{__html:s.extract}})]})]})]}),e.jsx(P,{})]})}export{$ as default};
