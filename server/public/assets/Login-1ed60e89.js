import{_ as ie,a as u,w as le,x as ee,S as ce,R as w,y as ue,z as de,A as pe,B as me,D as he,E as Q,F as q,G as fe,H as be,I as xe,r as C,o as T,j as a,J as N,K as X,s as z,l as U,m as G,M as $,N as ge,n as ve,O as E,P as W,Q as Ce,T as ye,U as Y,V as ke,C as Re,L as A,W as Se}from"./index-d49ab656.js";import{s as je,u as te,f as Pe,C as Fe,A as Me,d as Be,B as $e,T as Z,G as D}from"./LockOutlined-794ae24d.js";import{s as Ie,a as Oe}from"./axios-b8a0d269.js";import{H as we}from"./Header-d226c88f.js";import{e as Le,T as H}from"./Grow-75fceaeb.js";var Ne=function(e){ie(o,e);function o(n,s){var t;return t=e.call(this)||this,t.client=n,t.setOptions(s),t.bindMethods(),t.updateResult(),t}var r=o.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(s){this.options=this.client.defaultMutationOptions(s)},r.onUnsubscribe=function(){if(!this.listeners.length){var s;(s=this.currentMutation)==null||s.removeObserver(this)}},r.onMutationUpdate=function(s){this.updateResult();var t={listeners:!0};s.type==="success"?t.onSuccess=!0:s.type==="error"&&(t.onError=!0),this.notify(t)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(s,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,u({},this.options,{variables:typeof s<"u"?s:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var s=this.currentMutation?this.currentMutation.state:le(),t=u({},s,{isLoading:s.status==="loading",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},r.notify=function(s){var t=this;ee.batch(function(){t.mutateOptions&&(s.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):s.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),s.listeners&&t.listeners.forEach(function(c){c(t.currentResult)})})},o}(ce);function Ee(e,o,r){var n=w.useRef(!1),s=w.useState(0),t=s[1],c=ue(e,o,r),p=de(),i=w.useRef();i.current?i.current.setOptions(c):i.current=new Ne(p,c);var l=i.current.getCurrentResult();w.useEffect(function(){n.current=!0;var m=i.current.subscribe(ee.batchCalls(function(){n.current&&t(function(d){return d+1})}));return function(){n.current=!1,m()}},[]);var h=w.useCallback(function(m,d){i.current.mutate(m,d).catch(pe)},[]);if(l.error&&Ie(void 0,i.current.options.useErrorBoundary,[l.error]))throw l.error;return u({},l,{mutate:h,mutateAsync:l.mutate})}const Te=["component","direction","spacing","divider","children","className","useFlexGap"],ze=me(),Ue=je("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,o)=>o.root});function _e(e){return he({props:e,name:"MuiStack",defaultTheme:ze})}function qe(e,o){const r=C.Children.toArray(e).filter(Boolean);return r.reduce((n,s,t)=>(n.push(s),t<r.length-1&&n.push(C.cloneElement(o,{key:`separator-${t}`})),n),[])}const De=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],Ve=({ownerState:e,theme:o})=>{let r=u({display:"flex",flexDirection:"column"},Q({theme:o},q({values:e.direction,breakpoints:o.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=fe(o),s=Object.keys(o.breakpoints.values).reduce((i,l)=>((typeof e.spacing=="object"&&e.spacing[l]!=null||typeof e.direction=="object"&&e.direction[l]!=null)&&(i[l]=!0),i),{}),t=q({values:e.direction,base:s}),c=q({values:e.spacing,base:s});typeof t=="object"&&Object.keys(t).forEach((i,l,h)=>{if(!t[i]){const d=l>0?t[h[l-1]]:"column";t[i]=d}}),r=be(r,Q({theme:o},c,(i,l)=>e.useFlexGap?{gap:X(n,i)}:{"& > :not(style) ~ :not(style)":{margin:0,[`margin${De(l?t[l]:e.direction)}`]:X(n,i)}}))}return r=xe(o.breakpoints,r),r};function Ae(e={}){const{createStyledComponent:o=Ue,useThemeProps:r=_e,componentName:n="MuiStack"}=e,s=()=>z({root:["root"]},i=>U(n,i),{}),t=o(Ve);return C.forwardRef(function(i,l){const h=r(i),m=Le(h),{component:d="div",direction:y="column",spacing:j=0,divider:g,children:f,className:x,useFlexGap:b=!1}=m,M=T(m,Te),I={direction:y,spacing:j,useFlexGap:b},P=s();return a.jsx(t,u({as:d,ownerState:I,ref:l,className:N(P.root,x)},M,{children:g?qe(f,g):f}))})}function He(e){return U("PrivateSwitchBase",e)}G("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ge=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],We=e=>{const{classes:o,checked:r,disabled:n,edge:s}=e,t={root:["root",r&&"checked",n&&"disabled",s&&`edge${E(s)}`],input:["input"]};return z(t,He,o)},Ye=$(ge)(({ownerState:e})=>u({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Je=$("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ke=C.forwardRef(function(o,r){const{autoFocus:n,checked:s,checkedIcon:t,className:c,defaultChecked:p,disabled:i,disableFocusRipple:l=!1,edge:h=!1,icon:m,id:d,inputProps:y,inputRef:j,name:g,onBlur:f,onChange:x,onFocus:b,readOnly:M,required:I=!1,tabIndex:P,type:k,value:B}=o,R=T(o,Ge),[F,oe]=ve({controlled:s,default:!!p,name:"SwitchBase",state:"checked"}),S=te(),se=v=>{b&&b(v),S&&S.onFocus&&S.onFocus(v)},re=v=>{f&&f(v),S&&S.onBlur&&S.onBlur(v)},ne=v=>{if(v.nativeEvent.defaultPrevented)return;const K=v.target.checked;oe(K),x&&x(v,K)};let O=i;S&&typeof O>"u"&&(O=S.disabled);const ae=k==="checkbox"||k==="radio",_=u({},o,{checked:F,disabled:O,disableFocusRipple:l,edge:h}),J=We(_);return a.jsxs(Ye,u({component:"span",className:N(J.root,c),centerRipple:!0,focusRipple:!l,disabled:O,tabIndex:null,role:void 0,onFocus:se,onBlur:re,ownerState:_,ref:r},R,{children:[a.jsx(Je,u({autoFocus:n,checked:s,defaultChecked:p,className:J.input,disabled:O,id:ae?d:void 0,name:g,onChange:ne,readOnly:M,ref:j,required:I,ownerState:_,tabIndex:P,type:k},k==="checkbox"&&B===void 0?{}:{value:B},y)),F?t:m]}))}),Qe=Ke,Xe=W(a.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ze=W(a.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),et=W(a.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function tt(e){return U("MuiCheckbox",e)}const ot=G("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),V=ot,st=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],rt=e=>{const{classes:o,indeterminate:r,color:n}=e,s={root:["root",r&&"indeterminate",`color${E(n)}`]},t=z(s,tt,o);return u({},o,t)},nt=$(Qe,{shouldForwardProp:e=>Ce(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,r.indeterminate&&o.indeterminate,r.color!=="default"&&o[`color${E(r.color)}`]]}})(({theme:e,ownerState:o})=>u({color:(e.vars||e).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${o.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ye(o.color==="default"?e.palette.action.active:e.palette[o.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${V.checked}, &.${V.indeterminate}`]:{color:(e.vars||e).palette[o.color].main},[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),at=a.jsx(Ze,{}),it=a.jsx(Xe,{}),lt=a.jsx(et,{}),ct=C.forwardRef(function(o,r){var n,s;const t=Y({props:o,name:"MuiCheckbox"}),{checkedIcon:c=at,color:p="primary",icon:i=it,indeterminate:l=!1,indeterminateIcon:h=lt,inputProps:m,size:d="medium",className:y}=t,j=T(t,st),g=l?h:i,f=l?h:c,x=u({},t,{color:p,indeterminate:l,size:d}),b=rt(x);return a.jsx(nt,u({type:"checkbox",inputProps:u({"data-indeterminate":l},m),icon:C.cloneElement(g,{fontSize:(n=g.props.fontSize)!=null?n:d}),checkedIcon:C.cloneElement(f,{fontSize:(s=f.props.fontSize)!=null?s:d}),ownerState:x,ref:r,className:N(b.root,y)},j,{classes:b}))}),ut=ct,dt=Ae({createStyledComponent:$("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,o)=>o.root}),useThemeProps:e=>Y({props:e,name:"MuiStack"})}),pt=dt;function mt(e){return U("MuiFormControlLabel",e)}const ht=G("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),L=ht,ft=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],bt=e=>{const{classes:o,disabled:r,labelPlacement:n,error:s,required:t}=e,c={root:["root",r&&"disabled",`labelPlacement${E(n)}`,s&&"error",t&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",s&&"error"]};return z(c,mt,o)},xt=$("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:r}=e;return[{[`& .${L.label}`]:o.label},o.root,o[`labelPlacement${E(r.labelPlacement)}`]]}})(({theme:e,ownerState:o})=>u({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${L.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${L.label}`]:{[`&.${L.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),gt=$("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,o)=>o.asterisk})(({theme:e})=>({[`&.${L.error}`]:{color:(e.vars||e).palette.error.main}})),vt=C.forwardRef(function(o,r){var n,s;const t=Y({props:o,name:"MuiFormControlLabel"}),{className:c,componentsProps:p={},control:i,disabled:l,disableTypography:h,label:m,labelPlacement:d="end",required:y,slotProps:j={}}=t,g=T(t,ft),f=te(),x=(n=l??i.props.disabled)!=null?n:f==null?void 0:f.disabled,b=y??i.props.required,M={disabled:x,required:b};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof i.props[F]>"u"&&typeof t[F]<"u"&&(M[F]=t[F])});const I=Pe({props:t,muiFormControl:f,states:["error"]}),P=u({},t,{disabled:x,labelPlacement:d,required:b,error:I.error}),k=bt(P),B=(s=j.typography)!=null?s:p.typography;let R=m;return R!=null&&R.type!==H&&!h&&(R=a.jsx(H,u({component:"span"},B,{className:N(k.label,B==null?void 0:B.className),children:R}))),a.jsxs(xt,u({className:N(k.root,c),ownerState:P,ref:r},g,{children:[C.cloneElement(i,M),b?a.jsxs(pt,{direction:"row",alignItems:"center",children:[R,a.jsxs(gt,{ownerState:P,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}):R]}))}),Ct=vt;function yt(e){return a.jsxs(H,{variant:"body2",color:"text.secondary",align:"center",...e,children:["Copyright © ",a.jsx(A,{to:"/",className:"text-info-main",children:"Seuraava Askel"})," ",new Date().getFullYear(),"."]})}function kt(e){if(!e)return"";switch(e){case 400:return"Tarkista salasana ja sähköposti osoite";case 500:return"Sisäinen palvelin virhe. Yritä uudelleen";default:return"Jokin meni vikaan. Yritä uudelleen"}}function Mt(){const{mutate:e,isLoading:o,error:r}=Ee({mutationFn:async s=>{const{data:t}=await Oe.post("/api/auth/login",{email:s.email,password:s.password});return t}}),n=async s=>{var c,p;s.preventDefault();const t=new FormData(s.currentTarget);e({email:(c=t.get("email"))==null?void 0:c.toString(),password:(p=t.get("password"))==null?void 0:p.toString()},{onSuccess(i){console.log(i.token),console.log(i.user),Se({to:"/dashboard"})}})};return a.jsxs(a.Fragment,{children:[a.jsx(we,{}),a.jsx("main",{children:a.jsxs(Fe,{component:"section",maxWidth:"xs",children:[a.jsxs("div",{className:"mt-4 flex flex-col items-center p-2 ",children:[a.jsx(Me,{sx:{m:1,bgcolor:"secondary.dark"},children:a.jsx(Be,{})}),a.jsx("div",{className:"pt-2 text-error-main",children:a.jsx("p",{children:kt(r==null?void 0:r.response.status)})}),a.jsxs($e,{component:"form",onSubmit:n,sx:{mt:1},children:[a.jsx(Z,{color:"info",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Sähköposti",name:"email",autoComplete:"email",autoFocus:!0}),a.jsx(Z,{color:"info",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Salasana",type:"password",id:"password",autoComplete:"current-password"}),a.jsx(Ct,{control:a.jsx(ut,{value:"remember",color:"info"}),label:"Muista minut"}),a.jsx(ke,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",disabled:o,sx:{mt:3,mb:2},children:o?a.jsx(Re,{size:"26px",color:"info"}):a.jsx("p",{children:"Kirjaudu sisään"})}),a.jsxs(D,{container:!0,children:[a.jsx(D,{item:!0,xs:!0,children:a.jsx(A,{to:"#",className:"text-info-main",children:"Unohtuiko salasana?"})}),a.jsx(D,{item:!0,children:a.jsx(A,{to:"/register",className:"text-info-main",children:"Ei tiliä? Rekisteröidy."})})]})]})]}),a.jsx(yt,{sx:{mt:6,mb:0}})]})})]})}export{Mt as default};
