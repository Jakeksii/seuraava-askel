import{y as $,a0 as z,A as D,r as i,j as e,m as c,Z as G,B as K,$ as U,x as Z,T as p,W as H}from"./index-os0jSHay.js";import{L as J}from"./logo-E5JpJx87.js";import{d as N,a as Q,v as X}from"./test-password-wQ5TeF7-.js";import{u as Y}from"./use-router-bDj5njis.js";import{T as m}from"./TextField-h9qXJLW4.js";import{I as ee}from"./InputAdornment-_tTBcSVP.js";import{L as se}from"./LoadingButton-WCkky38Q.js";import{C as te}from"./Card-YLbqPDKW.js";import{L as ae}from"./Link-nYgHz0IS.js";import"./Select-2mYtfWTT.js";function re(){var f,x,g,j,k,v,y,b,w,_,S,C,L,I,R,T;const B=$(),h=Y(),{mutate:P,isLoading:V}=z(),{setSession:q}=D(),s=i.useRef(),[d,E]=i.useState(!1),[M,u]=i.useState(""),[r,A]=i.useState({first_name:"",last_name:"",email:"",password:""}),[t,F]=i.useState({first_name:!1,last_name:!1,email:!1,password:!1}),o=a=>{a.target.name==="password"&&(X(s.current.elements.password.value)?a.target.setCustomValidity(""):a.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),A({...r,[a.target.name]:a.target.value})},l=a=>{F({...t,[a.target.name]:!0})},W=a=>{a.preventDefault(),s.current.checkValidity()&&P(r,{onSuccess:n=>{q(n),localStorage.setItem("token",n.token),h.push("/verify-email")},onError:n=>{if(!n.response)return u("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:u("Syöttämäsi sähköpostiosoite on jo käytössä");break;default:u("Oho, jokin meni vikaan");break}}})},O=e.jsx("form",{noValidate:!0,onSubmit:W,ref:s,children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",gap:2,justifyContent:"flex-end",sx:{my:3},children:[e.jsx(m,{name:"first_name",label:"Etunimi",required:!0,error:!!(t.first_name&&((x=(f=s.current)==null?void 0:f.elements.first_name)!=null&&x.validationMessage)),helperText:t.first_name&&((j=(g=s.current)==null?void 0:g.elements.first_name)==null?void 0:j.validationMessage),InputLabelProps:{required:!1},value:r.first_name,onChange:o,onBlur:l}),e.jsx(m,{name:"last_name",label:"Sukunimi",required:!0,error:!!(t.last_name&&((v=(k=s.current)==null?void 0:k.elements.last_name)!=null&&v.validationMessage)),helperText:t.last_name&&((b=(y=s.current)==null?void 0:y.elements.last_name)==null?void 0:b.validationMessage),InputLabelProps:{required:!1},value:r.last_name,onChange:o,onBlur:l})]}),e.jsx(m,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(t.email&&((_=(w=s.current)==null?void 0:w.elements.email)!=null&&_.validationMessage)),helperText:t.email&&((C=(S=s.current)==null?void 0:S.elements.email)==null?void 0:C.validationMessage),InputLabelProps:{required:!1},value:r.email,onChange:o,onBlur:l}),e.jsx(m,{name:"password",type:d?"text":"password",autoComplete:"new-password",label:"Salasana",required:!0,error:!!(t.password&&((I=(L=s.current)==null?void 0:L.elements.password)!=null&&I.validationMessage)),helperText:t.password&&((T=(R=s.current)==null?void 0:R.elements.password)==null?void 0:T.validationMessage),InputLabelProps:{required:!1},value:r.password,onChange:o,onBlur:l,InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(G,{onClick:()=>E(!d),edge:"end",children:d?e.jsx(N,{}):e.jsx(Q,{})})})}}),e.jsx(se,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:V,children:"Rekisteröidy"})]})});return e.jsxs(K,{sx:{...U({color:Z(B.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(J,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(te,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(p,{variant:"h4",children:"Rekisteröidy"}),e.jsxs(p,{variant:"body2",sx:{mt:2,mb:2},children:["Oletko jo rekisteröitynyt?",e.jsx(ae,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{h.push("/login")},children:"Kirjaudu"})]}),e.jsx(p,{variant:"body1",color:"error",sx:{mb:5},children:M}),O]})})]})}function fe(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Rekisteröidy | SE-AS "})}),e.jsx(re,{})]})}export{fe as default};
