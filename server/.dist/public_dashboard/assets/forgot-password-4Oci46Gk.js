import{y as w,a1 as B,r as t,j as e,m as g,B as P,$ as R,x as W,T as a,W as M}from"./index-os0jSHay.js";import{L as q}from"./logo-E5JpJx87.js";import{u as z}from"./use-router-bDj5njis.js";import{T as I}from"./TextField-h9qXJLW4.js";import{L as f}from"./LoadingButton-WCkky38Q.js";import{C as A}from"./Card-YLbqPDKW.js";import{L as c}from"./Link-nYgHz0IS.js";import"./Select-2mYtfWTT.js";function D(){var m,d,h,x;const j=w(),n=z(),{mutate:b,isLoading:k,isSuccess:o}=B(),r=t.useRef(),[y,u]=t.useState(""),[v,S]=t.useState(!1),[i,L]=t.useState({email:""}),[l,C]=t.useState({email:!1}),T=s=>{L({...i,[s.target.name]:s.target.value})},E=s=>{C({...l,[s.target.name]:!0})},F=s=>{s.preventDefault(),r.current.checkValidity()&&b(i,{onError:p=>{if(!p.response)return u("Tarkista verkkoyhteytesi");switch(p.response.status){case 404:S(!0);break;default:u("Oho, jokin meni vikaan");break}}})},V=e.jsx("form",{noValidate:!0,onSubmit:F,ref:r,children:e.jsxs(g,{spacing:3,children:[e.jsx(I,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(l.email&&((d=(m=r.current)==null?void 0:m.elements.email)!=null&&d.validationMessage)),helperText:l.email&&((x=(h=r.current)==null?void 0:h.elements.email)==null?void 0:x.validationMessage),InputLabelProps:{required:!1},value:i.email,onChange:T,onBlur:E}),e.jsx(f,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:k,children:"Lähetä"})]})});return e.jsxs(P,{sx:{...R({color:W(j.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(q,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(g,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(A,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(a,{variant:"h4",children:"Salasanan nollaus"}),!o&&e.jsxs(a,{variant:"body2",sx:{mt:2,mb:2},children:["Muistuiko salasana?",e.jsx(c,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{n.push("/login")},children:"Takaisin"})]}),e.jsxs(a,{variant:"body1",color:"error",sx:{mb:1},children:[y,v&&e.jsxs(a,{variant:"body1",sx:{mb:0},children:["Syöttämääsi sähköpostia ei löytynyt.",e.jsx(c,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{n.push("/register")},children:"Rekisteröidy"})]})]}),!o&&V,o&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"h5",sx:{mt:2,mb:5},children:["Linkki salasanan vaihtamiseen on lähetetty sähköpostiin",e.jsx("br",{}),e.jsx(c,{children:i.email})]}),e.jsx(f,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",onClick:()=>{n.push("/")},children:"Takaisin"})]})]})})]})}function N(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx("title",{children:" Salasanan nollaus | SE-AS "})}),e.jsx(D,{})]})}export{N as default};
