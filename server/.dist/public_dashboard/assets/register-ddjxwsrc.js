import{y as z,F as D,A as G,r as i,j as e,m as c,I as J,B as K,E as N,x as U,T as p,W as $}from"./index-nQFFAt2i.js";import{L as H}from"./logo-9c5ToLA2.js";import{d as Q,a as X,v as Y}from"./test-password-A32DOsyd.js";import{u as Z,T as d,L as ee}from"./LoadingButton-nbMB_GQd.js";import{I as se}from"./InputAdornment-O14RqhdT.js";import{C as te}from"./Card-QkZeCVK7.js";import{L as ae}from"./Link-xj30OAaA.js";import"./Select-bwqtkRDL.js";function re(){var x,f,g,j,v,k,y,b,w,_,S,C,I,L,R,T;const B=z(),h=Z(),{mutate:E,isLoading:P}=D(),{setSession:V}=G(),s=i.useRef(),[u,q]=i.useState(!1),[M,m]=i.useState(""),[r,A]=i.useState({first_name:"",last_name:"",email:"",password:""}),[t,F]=i.useState({first_name:!1,last_name:!1,email:!1,password:!1}),o=a=>{a.target.name==="password"&&(Y(s.current.elements.password.value)?a.target.setCustomValidity(""):a.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),A({...r,[a.target.name]:a.target.value})},l=a=>{F({...t,[a.target.name]:!0})},O=a=>{a.preventDefault(),s.current.checkValidity()&&E(r,{onSuccess:n=>{V(n),sessionStorage.setItem("session_data",JSON.stringify(n)),h.push("/")},onError:n=>{if(!n.response)return m("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:m("Syöttämäsi sähköpostiosoite on jo käytössä");break;default:m("Oho, jokin meni vikaan");break}}})},W=e.jsx("form",{noValidate:!0,onSubmit:O,ref:s,children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",gap:2,justifyContent:"flex-end",sx:{my:3},children:[e.jsx(d,{name:"first_name",label:"Etunimi",required:!0,error:!!(t.first_name&&((f=(x=s.current)==null?void 0:x.elements.first_name)!=null&&f.validationMessage)),helperText:t.first_name&&((j=(g=s.current)==null?void 0:g.elements.first_name)==null?void 0:j.validationMessage),InputLabelProps:{required:!1},value:r.first_name,onChange:o,onBlur:l}),e.jsx(d,{name:"last_name",label:"Sukunimi",required:!0,error:!!(t.last_name&&((k=(v=s.current)==null?void 0:v.elements.last_name)!=null&&k.validationMessage)),helperText:t.last_name&&((b=(y=s.current)==null?void 0:y.elements.last_name)==null?void 0:b.validationMessage),InputLabelProps:{required:!1},value:r.last_name,onChange:o,onBlur:l})]}),e.jsx(d,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(t.email&&((_=(w=s.current)==null?void 0:w.elements.email)!=null&&_.validationMessage)),helperText:t.email&&((C=(S=s.current)==null?void 0:S.elements.email)==null?void 0:C.validationMessage),InputLabelProps:{required:!1},value:r.email,onChange:o,onBlur:l}),e.jsx(d,{name:"password",type:u?"text":"password",autoComplete:"new-password",label:"Salasana",required:!0,error:!!(t.password&&((L=(I=s.current)==null?void 0:I.elements.password)!=null&&L.validationMessage)),helperText:t.password&&((T=(R=s.current)==null?void 0:R.elements.password)==null?void 0:T.validationMessage),InputLabelProps:{required:!1},value:r.password,onChange:o,onBlur:l,InputProps:{endAdornment:e.jsx(se,{position:"end",children:e.jsx(J,{onClick:()=>q(!u),edge:"end",children:u?e.jsx(Q,{}):e.jsx(X,{})})})}}),e.jsx(ee,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:P,children:"Rekisteröidy"})]})});return e.jsxs(K,{sx:{...N({color:U(B.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(H,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(te,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(p,{variant:"h4",children:"Rekisteröidy"}),e.jsxs(p,{variant:"body2",sx:{mt:2,mb:2},children:["Oletko jo rekisteröitynyt?",e.jsx(ae,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{h.push("/login")},children:"Kirjaudu"})]}),e.jsx(p,{variant:"body1",color:"error",sx:{mb:5},children:M}),W]})})]})}function pe(){return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsx("title",{children:" Rekisteröidy | SE-AS "})}),e.jsx(re,{})]})}export{pe as default};
