import{y as D,a5 as G,A as K,r as i,j as e,m as c,a3 as U,B as $,a4 as H,x as J,T as p,W as N}from"./index-BfR9Iyc6.js";import{L as Q}from"./logo-BF6DuBGE.js";import{d as X,a as Y,v as Z}from"./test-password-6wPsOSw-.js";import{u as ee}from"./use-router-Bwzd77_m.js";import{T as m}from"./TextField-CKmx63Kb.js";import{I as se}from"./InputAdornment-1apjz5J0.js";import{L as te}from"./LoadingButton-D08xbPUI.js";import{C as ae}from"./Card-Dm8i3DpH.js";import{L as re}from"./Link-Cp_zJvhJ.js";import"./Select-aOBqE9Cw.js";function ne(){var f,x,g,j,v,k,y,b,w,S,_,C,L,I,R,T;const B=D(),h=ee(),{mutate:P,isLoading:V}=G(),{setSession:q,switchOrganization:E}=K(),s=i.useRef(),[d,M]=i.useState(!1),[A,u]=i.useState(""),[r,F]=i.useState({first_name:"",last_name:"",email:"",password:""}),[t,O]=i.useState({first_name:!1,last_name:!1,email:!1,password:!1}),o=a=>{a.target.name==="password"&&(Z(s.current.elements.password.value)?a.target.setCustomValidity(""):a.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),F({...r,[a.target.name]:a.target.value})},l=a=>{O({...t,[a.target.name]:!0})},W=a=>{a.preventDefault(),localStorage.clear(),E(void 0),s.current.checkValidity()&&P(r,{onSuccess:n=>{q(n),localStorage.setItem("token",n.token),h.push("/verify-email")},onError:n=>{if(!n.response)return u("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:u("Syöttämäsi sähköpostiosoite on jo käytössä");break;default:u("Oho, jokin meni vikaan");break}}})},z=e.jsx("form",{noValidate:!0,onSubmit:W,ref:s,children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",gap:2,justifyContent:"flex-end",sx:{my:3},children:[e.jsx(m,{name:"first_name",label:"Etunimi",required:!0,error:!!(t.first_name&&((x=(f=s.current)==null?void 0:f.elements.first_name)!=null&&x.validationMessage)),helperText:t.first_name&&((j=(g=s.current)==null?void 0:g.elements.first_name)==null?void 0:j.validationMessage),InputLabelProps:{required:!1},value:r.first_name,onChange:o,onBlur:l}),e.jsx(m,{name:"last_name",label:"Sukunimi",required:!0,error:!!(t.last_name&&((k=(v=s.current)==null?void 0:v.elements.last_name)!=null&&k.validationMessage)),helperText:t.last_name&&((b=(y=s.current)==null?void 0:y.elements.last_name)==null?void 0:b.validationMessage),InputLabelProps:{required:!1},value:r.last_name,onChange:o,onBlur:l})]}),e.jsx(m,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(t.email&&((S=(w=s.current)==null?void 0:w.elements.email)!=null&&S.validationMessage)),helperText:t.email&&((C=(_=s.current)==null?void 0:_.elements.email)==null?void 0:C.validationMessage),InputLabelProps:{required:!1},value:r.email,onChange:o,onBlur:l}),e.jsx(m,{name:"password",type:d?"text":"password",autoComplete:"new-password",label:"Salasana",required:!0,error:!!(t.password&&((I=(L=s.current)==null?void 0:L.elements.password)!=null&&I.validationMessage)),helperText:t.password&&((T=(R=s.current)==null?void 0:R.elements.password)==null?void 0:T.validationMessage),InputLabelProps:{required:!1},value:r.password,onChange:o,onBlur:l,InputProps:{endAdornment:e.jsx(se,{position:"end",children:e.jsx(U,{onClick:()=>M(!d),edge:"end",children:d?e.jsx(X,{}):e.jsx(Y,{})})})}}),e.jsx(te,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:V,children:"Rekisteröidy"})]})});return e.jsxs($,{sx:{...H({color:J(B.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(Q,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(ae,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(p,{variant:"h4",children:"Rekisteröidy"}),e.jsxs(p,{variant:"body2",sx:{mt:2,mb:2},children:["Oletko jo rekisteröitynyt?",e.jsx(re,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{h.push("/login")},children:"Kirjaudu"})]}),e.jsx(p,{variant:"body1",color:"error",sx:{mb:5},children:A}),z]})})]})}function xe(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:" Rekisteröidy | SE-AS "})}),e.jsx(ne,{})]})}export{xe as default};
