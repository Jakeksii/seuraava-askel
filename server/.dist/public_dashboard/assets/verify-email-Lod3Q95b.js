import{y as j,A as k,C as p,ab as g,ac as y,r as o,j as e,B as v,a4 as E,x as b,m as C,T as t,ad as L,W as V,E as S}from"./index-B3jCW4Fb.js";import{L as B}from"./logo-_6u3cJ9y.js";import{C as T}from"./Card-DW1bMlw1.js";import{L as w}from"./Link-DzaUqRWn.js";import{L as l}from"./LoadingButton-DudZCK5P.js";function A(){const c=j(),{session:i}=k(),{data:r}=p(i.token),{mutate:u,isLoading:d,isSuccess:h,isError:x}=g(),{logout:m}=y(),[f,s]=o.useState("");o.useEffect(()=>{a()},[]);const a=()=>{u({token:i.token},{onSuccess:()=>{console.log("Email verification link send")},onError:n=>{if(!n.response)return s("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:s("Virhe 409: Sähköpostisi on jo vahvistettu! Kirjaudu sisään uudelleen.");break;case 429:s("Olet yrittänyt liian monta kertaa. Odota hetki ja yritä uudestaan.");break;default:s("Oho, jokin meni vikaan.");break}}})};return e.jsxs(v,{sx:{...E({color:b(c.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(B,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(C,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(T,{sx:{p:5,width:1,maxWidth:420,display:"grid"},children:[e.jsx(t,{variant:"h4",sx:{mb:5},children:"Vahvista sähköposti"}),d&&e.jsx(L,{sx:{justifySelf:"center"}}),h&&e.jsxs(e.Fragment,{children:[e.jsxs(t,{variant:"body1",sx:{mb:5},children:["Hei ",r.first_name,", olemme lähettäneet sähköpostivahvistuksen osoitteeseen ",e.jsx(w,{underline:"none",children:r.email})]}),e.jsx(t,{variant:"body2",children:"Etkö saanut sähköpostia?"}),e.jsx(l,{size:"medium",variant:"text",onClick:a,sx:{mb:2,textAlign:"left",justifySelf:"left"},children:"Lähetä viesti uudelleen"})]}),x&&e.jsxs(t,{variant:"body1",color:"error",children:[" ",f," "]}),e.jsx(l,{fullWidth:!0,color:"error",size:"small",variant:"text",onClick:m,sx:{mt:5},children:"Kirjaudu ulos"})]})})]})}function K(){return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsx("title",{children:" Vahvista sähköposti "})}),e.jsx(S,{children:e.jsx(A,{})})]})}export{K as default};
