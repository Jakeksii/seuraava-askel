import{y as O,G as z,A as D,r as i,j as e,m as c,I as K,B as U,F as $,x as H,T as p,W as J}from"./index-4JY2uYc9.js";import{L as N}from"./logo-L2scAoTo.js";import{d as Q,a as X,v as Y}from"./test-password-iMOuN6d0.js";import{u as Z}from"./use-router-wSG2qjNp.js";import{T as m}from"./TextField-vdl0cmGb.js";import{I as ee}from"./InputAdornment-G0z_MuO8.js";import{L as se}from"./LoadingButton-MxWIXm8B.js";import{C as te}from"./Card-eoGuS8e4.js";import{L as ae}from"./Link-UErGXuUI.js";import"./Select-kMBZwo1Z.js";function re(){var f,x,g,j,k,v,y,b,w,_,S,C,I,L,R,T;const B=O(),h=Z(),{mutate:P,isLoading:V}=z(),{setSession:q}=D(),s=i.useRef(),[d,E]=i.useState(!1),[M,u]=i.useState(""),[r,A]=i.useState({first_name:"",last_name:"",email:"",password:""}),[t,F]=i.useState({first_name:!1,last_name:!1,email:!1,password:!1}),o=a=>{a.target.name==="password"&&(Y(s.current.elements.password.value)?a.target.setCustomValidity(""):a.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),A({...r,[a.target.name]:a.target.value})},l=a=>{F({...t,[a.target.name]:!0})},W=a=>{a.preventDefault(),s.current.checkValidity()&&P(r,{onSuccess:n=>{q(n),localStorage.setItem("token",n.token),h.push("/verify-email")},onError:n=>{if(!n.response)return u("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:u("Syöttämäsi sähköpostiosoite on jo käytössä");break;default:u("Oho, jokin meni vikaan");break}}})},G=e.jsx("form",{noValidate:!0,onSubmit:W,ref:s,children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",gap:2,justifyContent:"flex-end",sx:{my:3},children:[e.jsx(m,{name:"first_name",label:"Etunimi",required:!0,error:!!(t.first_name&&((x=(f=s.current)==null?void 0:f.elements.first_name)!=null&&x.validationMessage)),helperText:t.first_name&&((j=(g=s.current)==null?void 0:g.elements.first_name)==null?void 0:j.validationMessage),InputLabelProps:{required:!1},value:r.first_name,onChange:o,onBlur:l}),e.jsx(m,{name:"last_name",label:"Sukunimi",required:!0,error:!!(t.last_name&&((v=(k=s.current)==null?void 0:k.elements.last_name)!=null&&v.validationMessage)),helperText:t.last_name&&((b=(y=s.current)==null?void 0:y.elements.last_name)==null?void 0:b.validationMessage),InputLabelProps:{required:!1},value:r.last_name,onChange:o,onBlur:l})]}),e.jsx(m,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(t.email&&((_=(w=s.current)==null?void 0:w.elements.email)!=null&&_.validationMessage)),helperText:t.email&&((C=(S=s.current)==null?void 0:S.elements.email)==null?void 0:C.validationMessage),InputLabelProps:{required:!1},value:r.email,onChange:o,onBlur:l}),e.jsx(m,{name:"password",type:d?"text":"password",autoComplete:"new-password",label:"Salasana",required:!0,error:!!(t.password&&((L=(I=s.current)==null?void 0:I.elements.password)!=null&&L.validationMessage)),helperText:t.password&&((T=(R=s.current)==null?void 0:R.elements.password)==null?void 0:T.validationMessage),InputLabelProps:{required:!1},value:r.password,onChange:o,onBlur:l,InputProps:{endAdornment:e.jsx(ee,{position:"end",children:e.jsx(K,{onClick:()=>E(!d),edge:"end",children:d?e.jsx(Q,{}):e.jsx(X,{})})})}}),e.jsx(se,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:V,children:"Rekisteröidy"})]})});return e.jsxs(U,{sx:{...$({color:H(B.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(N,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(te,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(p,{variant:"h4",children:"Rekisteröidy"}),e.jsxs(p,{variant:"body2",sx:{mt:2,mb:2},children:["Oletko jo rekisteröitynyt?",e.jsx(ae,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{h.push("/login")},children:"Kirjaudu"})]}),e.jsx(p,{variant:"body1",color:"error",sx:{mb:5},children:M}),G]})})]})}function fe(){return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx("title",{children:" Rekisteröidy | SE-AS "})}),e.jsx(re,{})]})}export{fe as default};
