import{y as D,a5 as G,A as K,r as i,j as e,m as c,a3 as U,B as $,a4 as H,x as J,T as p,W as N,E as Q}from"./index-B3jCW4Fb.js";import{L as X}from"./logo-_6u3cJ9y.js";import{d as Y,a as Z,v as ee}from"./test-password-BKLwSutS.js";import{u as se}from"./use-router-CH7-W6vm.js";import{T as m}from"./TextField-DQCyuwm7.js";import{I as te}from"./InputAdornment-dOG2pP4o.js";import{L as ae}from"./LoadingButton-DudZCK5P.js";import{C as re}from"./Card-DW1bMlw1.js";import{L as ne}from"./Link-DzaUqRWn.js";import"./Select-Br8NO0KB.js";import"./react-is.production.min-DUDD-a5e.js";function ie(){var x,f,g,j,k,v,y,b,w,_,S,C,L,B,I,R;const T=D(),h=se(),{mutate:E,isLoading:P}=G(),{setSession:V,switchOrganization:q}=K(),s=i.useRef(),[d,M]=i.useState(!1),[A,u]=i.useState(""),[r,F]=i.useState({first_name:"",last_name:"",email:"",password:""}),[t,O]=i.useState({first_name:!1,last_name:!1,email:!1,password:!1}),o=a=>{a.target.name==="password"&&(ee(s.current.elements.password.value)?a.target.setCustomValidity(""):a.target.setCustomValidity("Salasanan on oltava vähintään 8 merkkiä pitkä ja siinä on oltava vähintään yksi iso ja pieni kirjain sekä numero.")),F({...r,[a.target.name]:a.target.value})},l=a=>{O({...t,[a.target.name]:!0})},W=a=>{a.preventDefault(),localStorage.clear(),q(),s.current.checkValidity()&&E(r,{onSuccess:n=>{V(n),localStorage.setItem("token",n.token),h.push("/verify-email")},onError:n=>{if(!n.response)return u("Tarkista verkkoyhteytesi");switch(n.response.status){case 409:u("Syöttämäsi sähköpostiosoite on jo käytössä");break;default:u("Oho, jokin meni vikaan");break}}})},z=e.jsx("form",{noValidate:!0,onSubmit:W,ref:s,children:e.jsxs(c,{spacing:3,children:[e.jsxs(c,{direction:"row",gap:2,justifyContent:"flex-end",sx:{my:3},children:[e.jsx(m,{name:"first_name",label:"Etunimi",required:!0,error:!!(t.first_name&&((f=(x=s.current)==null?void 0:x.elements.first_name)!=null&&f.validationMessage)),helperText:t.first_name&&((j=(g=s.current)==null?void 0:g.elements.first_name)==null?void 0:j.validationMessage),InputLabelProps:{required:!1},value:r.first_name,onChange:o,onBlur:l}),e.jsx(m,{name:"last_name",label:"Sukunimi",required:!0,error:!!(t.last_name&&((v=(k=s.current)==null?void 0:k.elements.last_name)!=null&&v.validationMessage)),helperText:t.last_name&&((b=(y=s.current)==null?void 0:y.elements.last_name)==null?void 0:b.validationMessage),InputLabelProps:{required:!1},value:r.last_name,onChange:o,onBlur:l})]}),e.jsx(m,{name:"email",type:"email",label:"Sähköposti",required:!0,error:!!(t.email&&((_=(w=s.current)==null?void 0:w.elements.email)!=null&&_.validationMessage)),helperText:t.email&&((C=(S=s.current)==null?void 0:S.elements.email)==null?void 0:C.validationMessage),InputLabelProps:{required:!1},value:r.email,onChange:o,onBlur:l}),e.jsx(m,{name:"password",type:d?"text":"password",autoComplete:"new-password",label:"Salasana",required:!0,error:!!(t.password&&((B=(L=s.current)==null?void 0:L.elements.password)!=null&&B.validationMessage)),helperText:t.password&&((R=(I=s.current)==null?void 0:I.elements.password)==null?void 0:R.validationMessage),InputLabelProps:{required:!1},value:r.password,onChange:o,onBlur:l,InputProps:{endAdornment:e.jsx(te,{position:"end",children:e.jsx(U,{onClick:()=>M(!d),edge:"end",children:d?e.jsx(Y,{}):e.jsx(Z,{})})})}}),e.jsx(ae,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"success",loading:P,children:"Rekisteröidy"})]})});return e.jsxs($,{sx:{...H({color:J(T.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(X,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(c,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(re,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(p,{variant:"h4",children:"Rekisteröidy"}),e.jsxs(p,{variant:"body2",sx:{mt:2,mb:2},children:["Oletko jo rekisteröitynyt?",e.jsx(ne,{variant:"subtitle2",component:"button",sx:{ml:.5},onClick:()=>{h.push("/login")},children:"Kirjaudu"})]}),e.jsx(p,{variant:"body1",color:"error",sx:{mb:5},children:A}),z]})})]})}function je(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:" Rekisteröidy "})}),e.jsx(Q,{children:e.jsx(ie,{})})]})}export{je as default};
